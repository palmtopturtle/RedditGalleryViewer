(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){},103:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(34),i=a.n(s),c=(a(42),a(2)),o=a(3),l=a(5),d=a(4),u=a(6),h=a(7),m=a(36),g=a(16),p=a.n(g),b=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.searchTextSubreddit,a=e.searchTextTag,n=e.sortBy,s=e.limit,i=e.tagsLength,c=e.handleTextChange,o=e.handleSelectChange,l=e.addTag,d=e.setSubreddit,u=e.warning,h=e.subreddit,m=e.resetSubreddit;return r.a.createElement("form",{className:"search-form"},r.a.createElement("div",{className:"input-container"},r.a.createElement("div",{className:"search-box-container"},h?r.a.createElement("button",{className:"btn",id:"reset-btn",type:"button",name:"reset",title:"Return to Frontpage",onClick:m},r.a.createElement("i",{className:"material-icons"},"home")):null,r.a.createElement("input",{className:"search-box",type:"text",name:"searchTextSubreddit",value:t,onChange:c,onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),d())}}),r.a.createElement("button",{className:"search-box-btn",type:"button",name:"addSubreddit",onClick:d},"Go To Subreddit")),r.a.createElement("div",{className:"search-box-container"},r.a.createElement("input",{className:"search-box",type:"text",name:"searchTextTag",value:a,onChange:c,onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),l())}}),r.a.createElement("button",{className:"search-box-btn",type:"button",name:"addTag",onClick:l},"Add Tag"))),u?r.a.createElement("div",{className:"warning"},u):null,r.a.createElement("div",{className:"select-container"},"Sort by:",r.a.createElement("select",{className:"select",id:"sort-select",name:"sortBy",value:n,onChange:o,disabled:!(i>0)},r.a.createElement("option",{value:"relevance"},"Relevance"),r.a.createElement("option",{value:"top"},"Top"),r.a.createElement("option",{value:"new"},"New"),r.a.createElement("option",{value:"comments"},"Comments")),"Limit:",r.a.createElement("select",{className:"select",id:"limit-select",name:"limit",value:s,onChange:o},r.a.createElement("option",{value:10},"10"),r.a.createElement("option",{value:25},"25"),r.a.createElement("option",{value:50},"50"))))}}]),t}(n.Component),f=a(35),v=a.n(f),E=(a(10),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).getPostPreview=function(){var e=!0;a.props.imgs.resolutions.forEach(function(t){t.width>=a.state.postWidth&&t.height>=a.state.postHeight&&e&&(a.setState({preview:t.url}),e=!1)}),e&&a.setState({preview:a.props.imgs.source.url})},a.truncateText=function(e,t){var a=e.indexOf(" ",t);return-1===a?e:e.substring(0,a)+" ..."},a.state={postWidth:0,postHeight:0,preview:""},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this.postDiv.getBoundingClientRect();this.props.imgs&&this.setState({postWidth:e.width,postHeight:e.height},this.getPostPreview)}},{key:"render",value:function(){var e=this,t=this.props,a=t.title,n=t.author,s=t.date,i=t.url,c=t.permalink,o=t.score,l=t.numComments,d=t.selfText,u=t.subreddit,h=new Date(1e3*s);return r.a.createElement("div",{className:"post",ref:function(t){e.postDiv=t}},this.state.preview?r.a.createElement("a",{href:i,target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{src:this.state.preview,alt:a})):r.a.createElement("div",{className:"selftext-container"},v()(d)),r.a.createElement("div",{className:"post-text-container"},r.a.createElement("h3",{className:"post-title"},r.a.createElement("a",{href:i,target:"_blank",rel:"noopener noreferrer",title:a},this.truncateText(a,100))),r.a.createElement("div",{className:"post-info"},"r/",u," | submitted by ",n," on"," ",h.toLocaleDateString()," - ",o," points -"," ",r.a.createElement("a",{href:"http://www.reddit.com".concat(c),target:"_blank",rel:"noopener noreferrer"},l," comments"))))}}]),t}(n.Component)),w=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.posts;return r.a.createElement("div",{className:"gallery"},e.map(function(t){return t.stickied?null:r.a.createElement(E,{key:e.indexOf(t),title:t.title,author:t.author,date:t.created_utc,url:t.url,permalink:t.permalink,imgs:t.preview?t.preview.images[0]:null,selfText:t.selftext_html,score:t.score,numComments:t.num_comments,subreddit:t.subreddit})}))}}]),t}(n.Component),j=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.tags,a=e.deleteTag;return r.a.createElement("div",{className:"tags-container"},t?t.map(function(e){return r.a.createElement("div",{className:"tag",key:e},e," ",r.a.createElement("i",{className:"material-icons remove-btn",onClick:function(){return a(e)}},"remove_circle"))}):null)}}]),t}(n.Component),T="https://www.reddit.com/",S=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(l.a)(this,Object(d.a)(t).call(this))).addTag=function(){var t=e.state.searchTextTag;t?e.state.tags.includes(t)?e.setState({warning:"Duplicate tag detected!"}):e.setState({tags:Object(m.a)(e.state.tags).concat([t]),searchTextTag:"",posts:[],after:"",reachedEnd:!1,error:null,warning:""},e.fetchPosts):e.setState({warning:"Please enter some text first!"})},e.setSubreddit=function(){var t=e.state.searchTextSubreddit;t?e.setState({subreddit:"r/"+t+"/",searchTextSubreddit:"",posts:[],after:"",reachedEnd:!1,error:null,warning:""},e.fetchPosts):e.setState({warning:"Please enter some text first!"})},e.resetSubreddit=function(){e.setState({subreddit:"",posts:[],after:"",reachedEnd:!1,error:null,warning:""},e.fetchPosts)},e.deleteTag=function(t){e.setState({tags:e.state.tags.filter(function(e){return e!==t}),posts:[],after:"",reachedEnd:!1,error:null,warning:""},e.fetchPosts)},e.fetchPosts=function(){e.setState({isLoading:!0}),e.state.tags.length>0?p.a.get("".concat(T).concat(e.state.subreddit,"search.json?q=").concat(e.outputTags(),"&limit=").concat(e.state.limit,"&sort=").concat(e.state.sortBy,"&restrict_sr=on&raw_json=1&after=").concat(e.state.after)).then(function(t){var a=t.data.data.children.map(function(e){return e.data}),n=e.state.posts.concat(a),r=t.data.data.after;a.length<e.state.limit&&e.setState({reachedEnd:!0}),e.setState({posts:n,after:r,isLoading:!1})}).catch(function(t){return e.setState({error:t,isLoading:!1})}):p.a.get("".concat(T).concat(e.state.subreddit,"hot.json?limit=").concat(e.state.limit,"&restrict_sr=on&raw_json=1&after=").concat(e.state.after)).then(function(t){var a=t.data.data.children.map(function(e){return e.data}),n=e.state.posts.concat(a),r=t.data.data.after;a.length<e.state.limit&&e.setState({reachedEnd:!0}),e.setState({posts:n,after:r,isLoading:!1})}).catch(function(t){return e.setState({error:t,isLoading:!1})})},e.handleTextChange=function(t){var a;e.setState((a={},Object(h.a)(a,t.target.name,t.target.value),Object(h.a)(a,"warning",""),a))},e.handleSelectChange=function(t){var a;e.setState((a={},Object(h.a)(a,t.target.name,t.target.value),Object(h.a)(a,"posts",[]),Object(h.a)(a,"after",""),Object(h.a)(a,"reachedEnd",!1),Object(h.a)(a,"error",null),Object(h.a)(a,"warning",""),a),e.fetchPosts)},e.handleError=function(){return"Network Error"===e.state.error.message||404===e.state.error.response.status?"Error: 404 not found! Did you type the subreddit name correctly?":"An error occured while fetching data! Is reddit.com down?"},e.outputTags=function(){return e.state.tags.join("+")},e.state={subreddit:"",sortBy:"relevance",limit:25,after:"",tags:[],searchTextSubreddit:"",searchTextTag:"",posts:[],reachedEnd:!1,isLoading:!1,error:null,warning:""},e}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.fetchPosts()}},{key:"render",value:function(){return r.a.createElement("div",{className:"app"},r.a.createElement("h1",{className:"header"},"Reddit Gallery Viewer - ",this.state.subreddit?this.state.subreddit:"Frontpage"),r.a.createElement(b,{searchTextSubreddit:this.state.searchTextSubreddit,searchTextTag:this.state.searchTextTag,sortBy:this.state.sortBy,limit:this.state.limit,tagsLength:this.state.tags.length,handleTextChange:this.handleTextChange,handleSelectChange:this.handleSelectChange,addTag:this.addTag,setSubreddit:this.setSubreddit,warning:this.state.warning,subreddit:this.state.subreddit,resetSubreddit:this.resetSubreddit}),r.a.createElement(j,{tags:this.state.tags,deleteTag:this.deleteTag}),r.a.createElement(w,{posts:this.state.posts}),r.a.createElement("div",{className:"footer"},this.state.isLoading?r.a.createElement("h2",{className:"header"},"Loading..."):null,this.state.posts.length>0&&!this.state.reachedEnd?r.a.createElement("button",{id:"load-btn",className:"btn",type:"button",name:"loadMore",onClick:this.fetchPosts},"Load More"):null,this.state.reachedEnd?r.a.createElement("h2",{className:"header"},"Reached end!"):null,this.state.error?r.a.createElement("h2",{className:"header"},this.handleError()):null))}}]),t}(n.Component),O=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(S,null)}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},37:function(e,t,a){e.exports=a(103)},42:function(e,t,a){},71:function(e,t){}},[[37,2,1]]]);
//# sourceMappingURL=main.f7752d3f.chunk.js.map